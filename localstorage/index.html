<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Greeting App</title>
  <style type="text/css" media="all">
    .emoji {
      width: 150px;
      position: relative;
      animation-direction: alternate;
      animation-duration: 1s;
      animation-name: animate;
      animation-iteration-count: infinite;
    }

    @keyframes animate {
      from {
        margin-top: 10px;
      }

      to {
        margin-top: 30px;
      }
  </style>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" type="text/css" media="all" />
</head>

<body class="bg-dark text-white">
  <div class="container text-center">
    <img alt="face" class="emoji" id="emoji" />
    <div id="myalert">
    </div>
    <h3 id="message"></h3>
    <input type="text" id="urname" placeholder="nama kamu" class="form-control mb-2" required min-length="4" />
    <button class="btn btn-primary btn-flat" id="btnHayuk">Hayuk</button>
    <button class="btn btn-success btn-flat" id="fixKenalan">Oke, ini nama saya</button>
  </div>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script type="text/javascript">
    const emoji = $("#emoji")
    const message = $("#message")
    const btnHayuk = $("#btnHayuk")
    const urname = $("#urname")
    const myalert = $("#myalert")
    const fixKenalan = $("#fixKenalan");

    urname.hide()
    fixKenalan.hide()

    btnHayuk.click(() => hayuk())
    fixKenalan.click(() => kenalan())

    const load = () => {
      const name = localStorage.getItem("name")
      //localStorage.removeItem("name")
      if (name) {
        emoji.attr("src", "https://pixabay.com/id/images/download/wink-1611815_640.png")
        message.text("Selamat datang kembali " + name + ", semoga sehat selalu ya!")
        $("button").hide()
        $("input").hide()
      } else {
        emoji.attr("src", "https://pixabay.com/id/images/download/emoji-1585401_640.png");
        message.text("Sepertinya kita belum kenalan, kenalan yuk!");
        urname.hide(300)
        btnHayuk.show(300)
      }
    }

    const hayuk = () => {
      emoji.attr("src", "https://pixabay.com/id/images/download/emoticon-1610573_640.png")
      message.text("Namaku Marzuki, siapa nama kamu?")
      urname.show(300)
      btnHayuk.hide(300)
      fixKenalan.show(300)
    }

    const kenalan = () => {
      if (urname.val().length < 5) {
        message.text("Kok namamu pendek bgt? coba isi lagi")
        setTimeout(() => {
          message.text("Namaku Marzuki, siapa nama kamu?")
        }, 2000)
      } else {
        localStorage.setItem("name", urname.val())
        emoji.attr("src", "https://pixabay.com/id/images/download/wink-1611815_640.png")
        message.text("Oke " + urname.val() + ", namamu akan selalu aku ingat di Browser ini, hehe")
        $("button").hide()
        $("input").hide()
      }
    }

    load()
  </script>
</body>

</html>